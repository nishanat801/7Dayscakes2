"use strict";Shopify.theme.jsProduct={init:function($section){Shopify.theme.jsProduct=$.extend(this,Shopify.theme.getSectionData($section));var isIE11=!!navigator.userAgent.match(/Trident.*rv\:11\./);isIE11||window.Shopify.loadFeatures([{name:"model-viewer",version:"0.8"},{name:"shopify-xr",version:"1.0"},{name:"model-viewer-ui",version:"1.0"}],Shopify.theme.productMedia.setupMedia);var $productGallery=$section.find(".product-gallery__main"),$stickyElement=$section.find(".sticky-product-scroll");$productGallery&&(Shopify.theme.jsProduct.enableSlideshow($productGallery),Shopify.theme.jsProduct.enable_zoom&&document.addEventListener("lazyloaded",Shopify.theme.jsProduct.enableZoom),Shopify.theme.jsProduct.enable_product_lightbox&&Shopify.theme.jsProduct.enableLightbox($productGallery)),$stickyElement&&isScreenSizeLarge()&&Shopify.theme.jsProduct.template=="image-scroll"&&Shopify.theme.jsProduct.enableStickyScroll($stickyElement,$productGallery),$(".product_form_options",$section).each(function(){$(".select-container").length&&new Shopify.OptionSelectors($(this).data("select-id"),{product:$(this).data("product"),onVariantSelected:selectCallback,enableHistoryState:$(this).data("enable-state")})}),window.location.search==="?contact_posted=true"&&($(".notify_form .contact-form").hide(),$(".notify_form .contact-form").prev(".message").html(Shopify.translation.notify_form_success));var $notify_form=$(".notify_form .contact-form");$notify_form.each(function(){var $nf=$(this);$nf.on("submit",function(e){$('input[name="challenge"]',$nf).val()!=="true"&&($.ajax({type:$nf.attr("method"),url:$nf.attr("action"),data:$nf.serialize(),success:function(data){$nf.fadeOut("slow",function(){$nf.prev(".message").html(Shopify.translation.notify_form_success)})},error:function(data){$('input[name="challenge"]',$nf).val("true"),$nf.submit()}}),e.preventDefault())})}),Shopify.theme_settings.product_form_style==="swatches"?this.enableProductSwatches():Shopify.theme_settings.product_form_style==="dropdown"&&($(".selector-wrapper select",$section).wrap('<span class="select" data-dropdown-form-style></span>'),this.findSelectedVariantImage()),$(".masonry--true").length>0&&Shopify.theme.applyMasonry(".thumbnail")},enableStickyScroll:function($stickyElement,$productGallery){var announcementHeight=0,headerHeight=0;typeof Shopify.theme.jsAnnouncementBar!="undefined"&&Shopify.theme.jsAnnouncementBar.enable_sticky&&(announcementHeight=$("#announcement-bar").outerHeight()),Shopify.theme_settings.header_layout!="vertical"&&Shopify.theme.jsHeader.enable_sticky&&(headerHeight=$("#header").outerHeight());var productImages=$productGallery.data("media-count");productImages>1&&$stickyElement.stick_in_parent({offset_top:announcementHeight+headerHeight+20})},enableLightbox:function($productGallery){$productGallery.find(".product-gallery__link").fancybox({beforeClose:function(instance,slide){var $instanceGallery=instance.$trigger.first().parents(".product-gallery__main");$instanceGallery.hide(),setTimeout(function(){$instanceGallery.fadeIn(100)},500)},afterClose:function(){setTimeout(function(){$productGallery.find(".is-selected a").focus()},500)}})},enableZoom:function(){var $image=$(event.target),zoomSrc=$image.data("zoom-src");zoomSrc&&$image.wrap('<span class="zoom-container"></span>').css("display","block").parent().zoom({url:zoomSrc,touch:!1,magnify:1})},disableSlideshow:function($section,selector){var $slider;$section?$slider=$section.find(".flickity-enabled"):$slider=$(selector),$slider.flickity("destroy")},enableSlideshow:function(selector,settings){var $productGallery=selector,$thumbnailProductGallery=$productGallery.closest(".product-gallery").find(".product-gallery__thumbnails");$productGallery.find(".gallery-cell:not(.product-gallery__image)").addClass("product-gallery__image"),$thumbnailProductGallery.find(".gallery-cell:not(.product-gallery__thumbnail)").addClass("product-gallery__thumbnail");var $slides=$productGallery.find(".product-gallery__image"),$thumbnails=$thumbnailProductGallery.find(".product-gallery__thumbnail"),thumbnailsEnabled,thumbnailsSliderEnabled,thumbnailsPosition,arrowsEnabled,slideshowSpeed,slideshowTransition;settings?(thumbnailsEnabled=settings.thumbnailsEnabled,thumbnailsSliderEnabled=settings.thumbnailsSliderEnabled,thumbnailsPosition=settings.thumbnailsPosition,arrowsEnabled=settings.arrowsEnabled,slideshowSpeed=settings.slideshowSpeed,slideshowTransition=settings.slideshowTransition):(thumbnailsEnabled=Shopify.theme.jsProduct.thumbnails_enabled,thumbnailsSliderEnabled=Shopify.theme.jsProduct.enable_thumbnail_slider,thumbnailsPosition=Shopify.theme.jsProduct.thumbnail_position,arrowsEnabled=Shopify.theme.jsProduct.thumbnail_arrows,slideshowSpeed=Shopify.theme.jsProduct.slideshow_speed,slideshowTransition=Shopify.theme.jsProduct.slideshow_transition),$productGallery.on("ready.flickity",function(){$slides.each(function(index,slide){var mediaType=$(slide).data("media-type")||$(slide).find("[data-media-type]").data("media-type"),videoID,videoLooping=$("[data-video-loop]").data("video-loop");switch(mediaType){case"external_video":if(videoID=$(slide).find("[data-plyr-video-id]").data("plyr-video-id"),videoPlayers)for(var i=0;i<videoPlayers.length;i++)(videoPlayers[i].id==videoID||videoPlayers[i].media.id==videoID)&&(videoPlayers[i].loop=videoLooping,$(slide).hasClass("is-selected")||(videoPlayers[i].keyboard={focused:!1,global:!1}));break;case"video":if(videoID=$(slide).find("[data-plyr-video-id]").data("plyr-video-id"),videoPlayers)for(var _i=0;_i<videoPlayers.length;_i++)(videoPlayers[_i].id==videoID||videoPlayers[_i].media.id==videoID)&&(videoPlayers[_i].loop=videoLooping,$(slide).hasClass("is-selected")||(videoPlayers[_i].keyboard={focused:!0,global:!1}));break;case"model":$(slide).hasClass("is-selected")&&mediaType=="model"&&isScreenSizeLarge()&&($(slide).on("mouseenter",function(){$productGallery.flickity("unbindDrag")}),$(slide).on("mouseleave",function(){$productGallery.flickity("bindDrag")}))}$(slide).keypress(function(event2){event2.which==13&&($(slide).find("model-viewer, .product-gallery__link, .plyr").focus(),(mediaType=="video"||mediaType=="external_video")&&checkForVideos(),mediaType=="model"&&autoplayModel())})})}),$productGallery.flickity({wrapAround:!0,adaptiveHeight:!0,dragThreshold:10,imagesLoaded:!0,pageDots:!1,prevNextButtons:$productGallery.data("media-count")>1||$slides.length>1,autoPlay:slideshowSpeed*1e3,fade:slideshowTransition==="fade",watchCSS:this.template==="image-scroll"&&!$productGallery.hasClass("js-gallery-modal"),arrowShape:arrowShape}),$productGallery.on("change.flickity",function(){$slides.each(function(index,slide){var mediaType=$(slide).data("media-type")||$(slide).find("[data-media-type]").data("media-type");if($(slide).hasClass("is-selected"))switch(mediaType){case"model":isScreenSizeLarge()&&($(slide).on("mouseenter",function(){$productGallery.flickity("unbindDrag")}),$(slide).on("mouseleave",function(){$productGallery.flickity("bindDrag")})),$(slide).find("model-viewer").on("shopify_model_viewer_ui_toggle_play",function(){$productGallery.flickity("unbindDrag")}),$(slide).find("model-viewer").on("shopify_model_viewer_ui_toggle_pause",function(){$productGallery.flickity("bindDrag")});break;default:$productGallery.flickity("bindDrag")}else switch(mediaType){case"external_video":$.each(videoPlayers,function(index2,player){player.pause()});break;case"video":$.each(videoPlayers,function(index2,player){player.pause()});break;case"model":$.each(Shopify.theme.productMedia.models,function(index2,model){model.pause()})}}),Shopify.theme.productMedia.showModelIcon($productGallery)});var $sliderArrows=$productGallery.find(".flickity-prev-next-button");($sliderArrows||$thumbnails)&&isScreenSizeLarge()&&($sliderArrows.on("click",function(){return $productGallery.on("settle.flickity",function(event2,index){var $selectedSlide=$productGallery.find(".product-gallery__image.is-selected"),mediaType=$selectedSlide.data("media-type")||$selectedSlide.find("[data-media-type]").data("media-type"),pId=$productGallery.data("product-id");if((mediaType=="video"||mediaType=="external_video")&&checkForVideos(),mediaType=="model"){var sortedModels=[];$.each(Shopify.theme.productMedia.models,function(index2,model){$(model.container).closest(".product-gallery__image").data("product-id")==pId&&sortedModels.push(model)}),$.each(sortedModels,function(index2,model){var $slide=$(model.container).parents(".product-gallery__image");$slide.hasClass("is-selected")&&model.play()})}$productGallery.off("settle.flickity")}),!1}),$thumbnails.on("click",function(event2){var index=$(event2.currentTarget).index();return $productGallery.flickity("select",index),$productGallery.on("settle.flickity",function(event3,index2){var $selectedSlide=$productGallery.find(".product-gallery__image.is-selected"),mediaType=$selectedSlide.data("media-type")||$selectedSlide.find("[data-media-type]").data("media-type"),pId=$productGallery.data("product-id");if((mediaType=="video"||mediaType=="external_video")&&checkForVideos(),mediaType=="model"){var sortedModels=[];$.each(Shopify.theme.productMedia.models,function(index3,model){$(model.container).closest(".product-gallery__image").data("product-id")==pId&&sortedModels.push(model)}),$.each(sortedModels,function(index3,model){var $slide=$(model.container).parents(".product-gallery__image");$slide.hasClass("is-selected")&&model.play()})}$productGallery.off("settle.flickity")}),!1}),$thumbnails.keypress(function(event2){var index=$(event2.currentTarget).index();if(event2.which==13){$productGallery.flickity("select",index);var $selectedSlide=$productGallery.find(".product-gallery__image.is-selected"),pId=$productGallery.data("product-id");$productGallery.on("settle.flickity",function(event3,index2){$selectedSlide.find("model-viewer, .plyr, a").focus(),$selectedSlide.find("[data-youtube-video]").attr("tabindex","0"),$productGallery.off("settle.flickity")});var mediaType=$selectedSlide.data("media-type")||$selected.find("[data-media-type]").data("media-type");if((mediaType=="video"||mediaType=="external_video")&&checkForVideos(),mediaType=="model"){var sortedModels=[];$.each(Shopify.theme.productMedia.models,function(index2,model){$(model.container).closest(".product-gallery__image").data("product-id")==pId&&sortedModels.push(model)}),$.each(sortedModels,function(index2,model){var $slide=$(model.container).parents(".product-gallery__image");$slide.hasClass("is-selected")&&model.play()})}return!1}}));function checkForVideos(){$slides.each(function(index,slide){var $slide=$(slide),mediaType=$slide.data("media-type")||$slide.find("[data-media-type]").data("media-type"),videoID=$slide.find("video").data("plyr-video-id"),$iframeVideo=$slide.find("iframe"),iframeID=$iframeVideo.attr("id");$slide.hasClass("is-selected")&&(mediaType=="video"?(videoID=$slide.find("video").data("plyr-video-id"),videoID&&autoplayVideo(videoID,$slide)):mediaType=="external_video"&&iframeID&&autoplayYoutubeVideo(iframeID,$slide))})}function autoplayVideo(videoID,$slide){$.each(videoPlayers,function(index,player){player.id==videoID&&(player.play(),player.on("exitfullscreen",function(){$slide.closest(".product-gallery").find(".product-gallery__thumbnails").focus()}))})}function autoplayYoutubeVideo(iframeID,$slide){$.each(videoPlayers,function(index,player){player.playing&&player.pause(),player.media.id==iframeID&&(player.play(),player.on("exitfullscreen",function(){$slide.closest(".product-gallery").find(".product-gallery__thumbnails").focus()}))})}$productGallery.on("settle.flickity",function(){$productGallery.flickity("resize")}),$(window).on("load",function(){$productGallery.flickity("resize")});var resizeTimer;if($(window).on("resize",function(e){clearTimeout(resizeTimer),resizeTimer=setTimeout(function(){$productGallery.flickity("resize")},250)}),thumbnailsEnabled==!0&&thumbnailsSliderEnabled==!0&&$slides.length>1)if(isScreenSizeLarge())if(thumbnailsPosition=="right-thumbnails"||thumbnailsPosition=="left-thumbnails"){$thumbnailProductGallery.addClass("vertical-slider-enabled");var navCellHeight=$thumbnails.height(),navHeight=$thumbnailProductGallery.height();setTimeout(function(){var $productGalleryHeight=$productGallery.height();$thumbnailProductGallery.css("max-height",$productGalleryHeight),$productGallery.on("change.flickity",function(){var $productGalleryHeight2=$productGallery.height();$thumbnailProductGallery.css("max-height",$productGalleryHeight2)})},500),$productGallery.on("select.flickity",function(){var flkty=$productGallery.data("flickity");if(flkty){$thumbnailProductGallery.find(".is-nav-selected").removeClass("is-nav-selected");var _$selected=$thumbnails.eq(flkty.selectedIndex).addClass("is-nav-selected"),scrollY=_$selected.position().top+$thumbnailProductGallery.scrollTop()-(navHeight+navCellHeight)/2;$thumbnailProductGallery.animate({scrollTop:scrollY})}})}else $thumbnailProductGallery.flickity({cellAlign:"center",contain:!0,groupCells:"80%",imagesLoaded:!0,pageDots:!1,prevNextButtons:$thumbnails.length>5?arrowsEnabled:!1,asNavFor:this.template==="image-scroll"&&isScreenSizeLarge()?"":$productGallery[0],arrowShape:arrowShape}),$thumbnailProductGallery.on("settle.flickity",function(){$thumbnailProductGallery.flickity("resize")}),$(window).on("load",function(){$thumbnailProductGallery.flickity("resize")});else $thumbnailProductGallery.flickity({cellAlign:"center",contain:!0,groupCells:"80%",imagesLoaded:!0,pageDots:!1,prevNextButtons:$thumbnails.length>5?arrowsEnabled:!1,asNavFor:this.template==="image-scroll"&&isScreenSizeLarge()?"":$productGallery[0],arrowShape:arrowShape})},enableProductSwatches:function(){if($("body").on("change",".swatch :radio",function(){var optionIndex=$(this).closest(".swatch").attr("data-option-index"),optionValue=$(this).val(),parentForm=$(this).closest(".product_form form");if(parentForm.siblings(".notify_form").length)var notifyForm=parentForm.siblings(".notify_form");else var notifyForm=$(".js-notify-form");var option1=parentForm.find(".swatch_options input:checked").eq(0).val(),option2=parentForm.find(".swatch_options input:checked").eq(1).val()||"",option3=parentForm.find(".swatch_options input:checked").eq(2).val()||"";if(option1&&option2&&option3)var notifyMessage=option1+" / "+option2+" / "+option3;else if(option1&&option2)var notifyMessage=option1+" / "+option2;else var notifyMessage=option1;notifyForm.find(".notify_form_message").attr("value",notifyForm.find(".notify_form_message").data("body")+" - "+notifyMessage),$(this).closest("form").find(".single-option-selector").eq(optionIndex).val(optionValue).trigger("change")}),$(".js-product_section").length){var $productForms=$(".js-product_section").find(".product_form");$productForms.addClass("is-visible"),$productForms.each(function(){var JSONData=$(this).data("product"),productID=$(this).data("product-id"),productSection=".product-"+productID+" .js-product_section",swatchOptions=$(this).find(".swatch_options .swatch");swatchOptions.length>1&&Shopify.linkOptionSelectors(JSONData,productSection)})}$(".js-product_section").length>1&&$("body").on("click",".swatch-element",function(){var swatchValue=$(this).data("value").toString();$(this).siblings('input[value="'+swatchValue.replace(/\"/g,'\\"')+'"]').prop("checked",!0).trigger("change");var JSONData=$(this).parents(".product_form").data("product"),productID=$(this).parents(".product_form").data("product-id"),productSection=".product-"+productID+" .js-product_section",swatchOptions=$(this).parents(".product_form").find(".swatch_options .swatch");swatchOptions.length>1&&Shopify.linkOptionSelectors(JSONData,productSection)}),this.findSelectedVariantImage()},findSelectedVariantImage:function(){$("[data-variant-selector]").on("selectedVariantChanged",function(){$(this).attr("disabled")||getIndex($(this),$(this).val())});function getIndex($selector,variantID){var $parentForm=$selector.parents(".product_form"),$option=$parentForm.find("select option[value=".concat(variantID,"]")),imageID=$option.attr("data-image-id");if(!imageID)return!1;var index=$("[data-image-id=".concat(imageID,"]")).data("index");Shopify.theme.jsProduct.template==="image-scroll"&&Shopify.theme.jsProduct.scrollSelectedImage(index)}},scrollSelectedImage:function(variant){var headerHeight=0,announceHeight=0;Shopify.theme.jsHeader.enable_sticky==!0&&Shopify.theme_settings.header_layout!="vertical"&&(headerHeight=Shopify.theme.jsHeader.getHeaderHeight()),typeof Shopify.theme.jsAnnouncementBar!="undefined"&&Shopify.theme.jsAnnouncementBar.enable_sticky==!0&&Shopify.theme_settings.header_layout!="vertical"&&(announceHeight=Shopify.theme.jsAnnouncementBar.getAnnouncementHeight());var totalHeight=headerHeight+announceHeight;Shopify.theme.scrollToTop($('[data-index="'.concat(variant,'"]')),totalHeight)},relatedProducts:function(){$(".block__recommended-products .js-related-products-slider .products-slider").each(function(index,value){var $relatedSlider=$(this),slideData={products_per_slide:$relatedSlider.data("products-per-slide"),products_available:$relatedSlider.data("products-available"),products_limit:$relatedSlider.data("products-limit"),initialIndex:0,cellAlign:"left",wrapAround:!0};slideData.products_available>slideData.products_per_slide&&slideData.products_limit>slideData.products_per_slide?slideData.wrapAround=!0:slideData.wrapAround=!1,slideData.products_available<slideData.products_per_slide||slideData.products_limit<slideData.products_per_slide?($relatedSlider.addClass("container is-justify-center"),$relatedSlider.find(".gallery-cell").addClass("column")):($relatedSlider.flickity({lazyLoad:2,freeScroll:!0,imagesLoaded:!0,draggable:!0,cellAlign:"center",wrapAround:slideData.wrapAround,pageDots:!1,contain:!0,prevNextButtons:slideData.products_limit>slideData.products_per_slide,initialIndex:slideData.initialIndex,arrowShape:arrowShape}),$relatedSlider.on("settle.flickity",function(){$relatedSlider.flickity("resize")}),$(window).on("load",function(){$relatedSlider.flickity("resize")}))})},unload:function($section){$(".selector-wrapper select",$section).unwrap(),this.disableSlideshow($section),$("[data-variant-selector]").off(),document.removeEventListener("lazybeforeunveil",Shopify.theme.jsProduct.enableZoom)}};
//# sourceMappingURL=/cdn/shop/t/15/assets/z__jsProduct.js.map?v=13469083626722751511690647505
